import { Component, OnInit, AfterViewInit } from '@angular/core';
import { AoeData } from "./../aoeData/aoeData";
import { UnitType } from "./../aoeData/unitType";
import { Player } from "./../aoeData/player";
import { Color } from "./../helper/color";
import { Battle } from "./../aoeData/battle";

@Component({
  selector: 'app-matrix',
  templateUrl: './matrix.component.html',
  styleUrls: ['./matrix.component.css']
})
export class MatrixComponent implements OnInit {

	public uts: UnitType[] = AoeData.unitTypesList;
	public combatresults: number[][];
	public combatresultsNoHnR: number[][];
	public combatresultsSemiHnR: number[][];
	public combatresultsFullHnR: number[][];
	public combatresultsNoHnR_LGMP: number[][];

	public hitAndRunMode: number = 0; // 0=noHit&Run, 1=semi, 2=fullHit&Run
	public hitAndRunModes: string[] = ["No Hit&Run", "Medium Hit&Run", "Perfect Hit&Run"];

	public resourceValue: number = 2; // 0=equal worth, 1=gold+50% worth, 2=100f=100w=17g
	public resourceValues: string[] = ["100F=100W=100G", "100F=100W=66,6G", "100F=100W=17G"];
	public resourceValuesFactors: number[][] = [[1, 1, 1], [1, 1, 1.5], [1, 1, 5.88235]];

	public numberOfSimulations: number = 20;
	public ut1: number = 0;
	public ut2: number = 0;

	public working: boolean = false;
	public players: Player[];

	public numberUtToDisplay: number = 28; // to display all unit types in the matrix, set this to 57; to display all non-unique unit types, set this to 15


	constructor() {
		// uncomment to calculate matrix (commented out to get pre-calculated values)
		/*
		this.combatresults = [];

		for(let i: number = 0; i < this.numberUtToDisplay; i++){
			this.combatresults.push([]);
			for (let j: number = 0; j < this.numberUtToDisplay; j++){
				this.combatresults[i].push(i == j ? 1 : 0);
			}
		}
		
		this.working = true;
		setTimeout(this.CreateBattles.bind(this), 0);
		*/
	}


	public ngOnInit(){
		this.combatresultsNoHnR = [
			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0444, 0, 0, 69.86486486486487, 0.408, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[Infinity, 1, 9.671641791044776, 5.930018416206262, 3.430962343096234, 0.8578878748370273, 5.103011093502377, 0.3243076923076923, 3.7837837837837838, 1.8516388729154687, 13.670886075949367, 2.298050139275766, 1.929510155316607, Infinity, 6.273764258555133, 1.9724770642201834, 0.16953846153846153, 2.5174825174825175, 0.4996923076923077, 1.3278553820870995, 2.746018440905281, 1.3341604631927213, 1.569767441860465, 0.016923076923076923, 2.206991089787526, 0.23476923076923076, 2.8146853146853146, 0.7990912041544953],
			[Infinity, 0.09533333333333334, 1, 0.28, 5.361552028218695, 2.578125, 5.87426326129666, 3.6494597839135654, 4.193548387096774, 0.010333333333333333, 0.453, 0.5, 0.17233333333333334, Infinity, 2.849002849002849, 0.11633333333333333, 0.169, 0.162, 0.013666666666666667, 0.10266666666666667, 0.226, 0.075, 0.51, 1.9181991122384274, 2.7298050139275767, 0, 0.389, 0.012],
			[Infinity, 0.17542857142857143, 3.5619242579324464, 1, 2.2013758599124453, 0.3585714285714286, 3.119349005424955, 0.22257142857142856, 2.22007722007722, 5.785123966942149, 348, 5.852842809364549, 2.132888349514563, Infinity, 11.89655172413793, 4.577922077922078, 0.024857142857142855, 0.4125714285714286, 0.5142857142857142, 0.25342857142857145, 0.4, 0.24542857142857144, 3.643979057591623, 0, 1.5695067264573992, 0, 2.9436860068259385, 0.22628571428571428],
			[Infinity, 0.28425, 0.201, 0.42875, 1, 0.243, 0.125, 0.09025, 1.9313819577735125, 3.6405109489051095, Infinity, 2.717391304347826, 5.0125628140703515, Infinity, 3.5651408450704225, 3.4746503496503496, 0.22825, 0.6445, 0.466, 0.539, 1.2683161953727506, 0.36325, 2.3855421686746987, 0, 0.15025, 0, 2.5604325699745547, 0.1775],
			[Infinity, 1.4663774403470715, 0.45466666666666666, 2.6404715127701377, 3.8598506605399194, 1, 0.2794074074074074, 0.43348148148148147, 5, 6, Infinity, 6.1041292639138245, 7.137566137566138, Infinity, 7.9411764705882355, 5.236617532971295, 1.9084290114813778, 2.330801104972376, 1.6288610038610039, 3.072702331961591, 3.3963963963963963, 2.0661157024793386, 4.977777777777778, 0.1731851851851852, 0.337037037037037, 0.2962962962962963, 4.902456647398844, 0.4746666666666667],
			[Infinity, 0.2125217391304348, 0.19669565217391305, 0.35791304347826086, 6.7211201866977826, 3.398711943793911, 1, 2.27363382528919, 8.132956152758133, 1.1626203432398494, 7.102342786683107, 4.293116210214656, 3.7900588620013083, Infinity, 2.7014218009478674, 1.579163248564397, 0.276, 0.3700869565217391, 0.2549565217391304, 0.3735652173913043, 0.4925217391304348, 0.248, 3.2951945080091534, 0.5093913043478261, 4.708777686628384, 0, 1.5036610878661087, 0.16104347826086957],
			[Infinity, 3.093220338983051, 0.3953684210526316, 4.377011494252874, 6.467391304347826, 2.046783625730994, 0.4503157894736842, 1, 5.261852260198457, 4.864588656106285, Infinity, 5.2631578947368425, 5.681818181818182, Infinity, 0.2850526315789474, 4.2484388938447815, 2.861842105263158, 4.404432132963989, 0.9255574989068649, 1.8456766188445133, 6.10783055198973, 3.5241965275212412, 4.535885167464115, 0.2575789473684211, 0.2925263157894737, 0.346, 3.777206173328057, 1.5426908150064682],
			[Infinity, 0.30017391304347824, 0.2801739130434783, 0.4930434782608696, 0.5259130434782608, 0.18434782608695652, 0.12904347826086957, 0.17843478260869566, 1, 0.7913043478260869, 11.925465838509316, 1.0771641206423814, 3.120624663435649, Infinity, 1.8222506393861893, 1.2194856146469049, 0.2773913043478261, 0.4648695652173913, 0.2627826086956522, 0.34904347826086957, 0.5351304347826087, 0.3396521739130435, 0.6521739130434783, 0.0071304347826086955, 0.10939130434782608, 0, 1.953125, 0.20973913043478262],
			[Infinity, 0.5711428571428572, 58.983050847457626, 0.17085714285714285, 0.28, 0.11, 0.7931034482758621, 0.084, 1.1838235294117647, 1, 0.24085714285714285, 0.5114285714285715, 5.977891156462585, 17.028985507246375, 0.8052334225393993, 0.4682857142857143, 0.5031428571428571, 0.572, 0.6331428571428571, 1.2416250890947969, 0.02, 1.0311796849887496, 1.241526935426329, 0, 0.6357142857142857, 1.5981735159817352, 3.6239495798319328, 0.5554285714285714],
			[16.39344262295082, 0.07366666666666667, 2.079002079002079, 0.0023333333333333335, 0, 0, 0.07466666666666667, 0, 0.017, 4.198047419804742, 1, 3.033367037411527, 5.703564727954972, 10.426621160409557, 0.02266666666666667, 2.3094688221709005, 0.0023333333333333335, 0.024, 0.5423333333333333, 0.141, 0, 0.04633333333333333, 2.9940119760479043, 0, 0.4083333333333333, 0.002, 3.440736478711162, 0.021],
			[Infinity, 0.4406, 1.992, 0.1854, 0.372, 0.1512, 0.2322, 0.1558, 0.8600823045267489, 1.8039927404718694, 0.339, 1, 5.888888888888889, 15.666666666666666, 0.4876, 0.9760166840458812, 0.5016, 0.486, 0.4568, 1.2759493670886075, 0.007, 0.5526, 1.699831365935919, 0.0192, 0.2266, 0.64, 3.4701754385964914, 0.3916],
			[91.34615384615384, 0.5549473684210526, 5.36806342015855, 0.5090526315789474, 0.19621052631578947, 0.11073684210526316, 0.25305263157894736, 0.08989473684210526, 0.3157894736842105, 0.16442105263157894, 0.1703157894736842, 0.1694736842105263, 1, 0.7314933675652546, 0.2745263157894737, 0.1191578947368421, 0.2503157894736842, 0.6461052631578947, 0.184, 0.45052631578947366, 0.38905263157894737, 0.8033276450511946, 0.19073684210526315, 0.0029473684210526317, 0.19452631578947369, 3.7460567823343847, 0.42, 0.6774736842105263],
			[0.036170212765957444, 0, 0, 0, 0, 0, 0, 0, 0, 0.06314893617021276, 0.10663829787234043, 0.07702127659574468, 1.4172393007836046, 1, 9.766277128547578, 0.11617021276595745, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.6366680619506069, 0],
			[20.380434782608695, 0.3198666666666667, 0.8892867373245489, 0.16986666666666667, 0.4896, 0.12413333333333333, 0.5082666666666666, 2.0334796926454444, 0.9213954834973943, 1.686936936936937, 11.127596439169139, 2.314814814814815, 3.523474178403756, 0.043866666666666665, 1, 0.24293333333333333, 0.4474666666666667, 0.23706666666666668, 0.6285333333333334, 0.52, 0.15853333333333333, 0.3797333333333333, 0.7392, 0.4381333333333333, 0.4348, 0.38666666666666666, 1.8393208661417322, 0.2472],
			[Infinity, 0.5096, 7.636363636363637, 0.22586666666666666, 0.3221333333333333, 0.1368, 0.5549333333333333, 0.11146666666666667, 0.6485333333333333, 1.9464469618949536, 0.46, 0.7351757445666756, 8.992718446601941, 9.543147208121827, 3.8779731127197516, 1, 0.5277333333333334, 0.48106666666666664, 1.2574829931972789, 1.0883944678292243, 0.012533333333333334, 0.5064, 1.8864097363083163, 0, 0.5954666666666667, 1.4904610492845787, 5.13531799729364, 0.5098666666666667],
			[Infinity, 5.428784489187174, 4.594936708860759, 12.88495575221239, 3.9543726235741445, 0.5037241379310344, 3.3541666666666665, 0.331448275862069, 3.4110169491525424, 1.4305364511691885, 16.689655172413794, 1.8145662440964454, 3.78803777544596, Infinity, 2.0779220779220777, 1.6643788606726149, 1, 7.1330724070450096, 0.3351724137931035, 3.5, 11.514285714285714, 2.565095003518649, 1.6389710903710448, 0.11572413793103448, 2.236559139784946, 7.352941176470588, 2.019230769230769, 7.036679536679537],
			[Infinity, 0.3884444444444444, 5.50122249388753, 2.2741116751269037, 1.6034359341445956, 0.3884444444444444, 2.744798041615667, 0.18777777777777777, 2.0899347623485554, 1.731066460587326, 14.900662251655628, 2.14081826831589, 1.6403379867744305, Infinity, 5.710659898477157, 2.0197486535008977, 0.11911111111111111, 1, 0.4557777777777778, 0.4613333333333333, 1.8450244698205547, 0.248, 1.3566308243727598, 0.012222222222222223, 1.5384615384615385, 0.1111111111111111, 2.3286604361370715, 0.516],
			[Infinity, 1.824782187802517, 33.75, 1.7142857142857142, 2.088888888888889, 0.5616, 3.864562118126273, 0.6282666666666666, 3.4531392174704276, 1.4713896457765667, 1.565217391304348, 2.055164954029205, 5.285306704707561, Infinity, 2.024838012958963, 0.7583243823845328, 2.9568627450980394, 2.1963974433468914, 1, 2.531986531986532, 0.5730666666666666, 0.8285252089511997, 2.0541137493097734, 0.3264, 2.302070645554202, 6.855575868372943, 3.9989462592202316, 2.7855563743551954],
			[Infinity, 0.7255, 9.157175398633257, 3.575268817204301, 1.8596001859600186, 0.302, 2.600129198966408, 0.406, 2.7720385674931127, 0.76025, 6.401273885350318, 0.7675, 2.206858407079646, Infinity, 2.5978191148171903, 0.9648093841642229, 0.26625, 2.190265486725664, 0.388, 1, 3.015921152388173, 0.51975, 0.861310133060389, 0.20625, 1.1632947976878614, 0.0235, 2.9595588235294117, 0.5455],
			[Infinity, 0.3525641025641026, 4.033092037228542, 2.214689265536723, 0.6625641025641026, 0.2682051282051282, 1.9138521781693587, 0.11692307692307692, 1.9697732997481108, 38.431372549019606, 975, 260, 2.676975945017182, Infinity, 10.209424083769633, 111.42857142857143, 0.07230769230769231, 0.4866666666666667, 1.8249883013570425, 0.3148717948717949, 1, 0.20307692307692307, 11.030640668523677, 0, 1.794871794871795, 0.003076923076923077, 4.177350427350428, 0.36923076923076925],
			[Infinity, 0.7693701857725419, 9.090909090909092, 3.3633633633633635, 2.600116076610563, 0.4408888888888889, 3.9411247803163443, 0.2786666666666667, 3.002008032128514, 0.8379913655987276, 11.508951406649617, 1.802162595114137, 1.2061235647895026, Infinity, 3.875968992248062, 1.9841269841269842, 0.42844444444444446, 3.8038884192730347, 1.031011567807039, 1.9520697167755992, 4.833333333333333, 1, 1.975736568457539, 0.40644444444444444, 2.4163969795037756, 3.0779753761969904, 2.595486111111111, 3.3783783783783785],
			[Infinity, 0.741, 1.8796992481203008, 0.291, 0.452, 0.2025, 0.2931666666666667, 0.20733333333333334, 1.5055387713997985, 0.7331666666666666, 0.3185, 0.5691666666666667, 4.7727272727272725, Infinity, 1.4598540145985401, 0.5086666666666667, 0.6428333333333334, 0.8105830805527469, 0.49316666666666664, 1.288659793814433, 0.1105, 0.5541666666666667, 1, 0.055, 0.2775, 2.0366598778004072, 3.1440588853838065, 0.5886666666666667],
			[Infinity, 9.030144167758847, 1.0395555905759988, 15.34675615212528, Infinity, 4.470779220779221, 1.9008264462809918, 3.64411294619073, 22.8099173553719, 8.245192307692308, Infinity, 8.228980322003578, 10.43560606060606, Infinity, 0.7386712605797319, 5.198863636363637, 6.221770551038844, 11.380165289256198, 1.912358924341647, 3.041556145004421, 23.228426395939085, 2.8450413223140494, 6.157965194109773, 1, 0.8380172604558531, 4.132852419597235, 5.174353205849269, 4.2803854522847375],
			[Infinity, 0.6021428571428571, 0.48342857142857143, 0.7814285714285715, 5.950972104818258, 2.7626918536009444, 0.2357142857142857, 3.0712101354303187, 8.565323565323565, 1.228960396039604, 2.152713891444342, 4.081632653061225, 4.692923898531375, Infinity, 2.1158463385354143, 1.609739210708516, 0.4805714285714286, 0.8049340218014917, 0.458, 0.7708571428571429, 0.7137142857142857, 0.4551428571428571, 3.380281690140845, 0.7577895355673133, 1, 0.0027142857142857142, 3.2342093130474874, 0.40885714285714286],
			[Infinity, 3.9468690702087286, Infinity, Infinity, Infinity, 3.4139637163276526, Infinity, 3.012974531475252, Infinity, 0.5192, 100.64516129032258, 1.3450417648318698, 0.2256, Infinity, 3.189873417721519, 0.60896, 0.14384, 8.075422626788036, 0.13504, 27.733333333333334, 49.92, 0.32464, 0.48768, 0.2376, 170.27027027027026, 1, 1.270495214315439, 3.9105793450881614],
			[Infinity, 0.412, 2.782608695652174, 0.38521739130434784, 0.45704347826086955, 0.20417391304347826, 0.6450434782608696, 0.23617391304347826, 0.5139130434782608, 0.2732173913043478, 0.3005217391304348, 0.2773913043478261, 2.3769483182936835, 0.6660869565217391, 0.4657391304347826, 0.18330434782608696, 0.44, 0.4765217391304348, 0.2542608695652174, 0.38330434782608697, 0.26869565217391306, 0.4092173913043478, 0.3182608695652174, 0.07895652173913044, 0.27756521739130435, 0.8040816326530612, 1, 0.4022608695652174],
			[Infinity, 1.120146904512067, 30.405405405405407, 4.186915887850467, 5.320665083135392, 2.0586876155268024, 6.388888888888889, 0.646, 4.8644251626898045, 1.672890216579537, 17.857142857142858, 2.6254375729288215, 1.4745706737120212, Infinity, 5.625, 1.8322475570032573, 0.14333333333333334, 1.9929140832595218, 0.3357777777777778, 1.9260533104041273, 2.507760532150776, 0.296, 1.832797427652733, 0.2291111111111111, 2.6698450536352802, 0.23044444444444445, 2.400963597430407, 1],
		];

		this.combatresultsSemiHnR = [
			[1,0,0,0,0,0,0,0,0,0,0.0212,0,0.0016,117.5,0.288,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[Infinity,1,9.585798816568047,5.833333333333333,3.3884297520661155,0.8007015306122449,5.054945054945055,0.33015384615384613,3.7096774193548385,0.6255384615384615,7.921760391198044,1.3704318936877076,1.0408234473133287,Infinity,4.319371727748691,0.5676923076923077,0.18061538461538462,2.4676313785224675,0.19846153846153847,0.5978461538461538,2.856146469049695,1.3634826711749788,0.20492307692307693,0.012615384615384615,0.8433455028211085,0.23476923076923076,2.0734063103670315,0.8793852322084865],
			[Infinity,0.10733333333333334,1,0.24833333333333332,5.041459369817579,2.6541554959785523,5.828460038986354,3.7392373923739237,4.2775393419170245,0,0.18566666666666667,0.125,0.06166666666666667,Infinity,2.1052631578947367,0,0.14966666666666667,0.16933333333333334,0,0.03866666666666667,0.255,0.087,0.002,1.9428387925497752,1.0730223123732252,0,0.2836666666666667,0.016666666666666666],
			[Infinity,0.17,3.2923368022705772,1,2.3127463863337714,0.35085714285714287,3.0530973451327434,0.21714285714285714,2.3138832997987926,4.716981132075472,71.0204081632653,4.487179487179487,1.7171470444553005,Infinity,9.663865546218487,3.585961342828077,0.039142857142857146,0.40514285714285714,0.40485714285714286,0.22514285714285714,0.41,0.24285714285714285,2.5180897250361793,0,0.7358602309742375,0,2.4642857142857144,0.22628571428571428],
			[Infinity,0.2745,0.19425,0.42425,1,0.238,0.1365,0.0855,2.0125,2.882947976878613,1005,2.0964360587002098,4.375,Infinity,3.298045602605863,2.509469696969697,0.24275,0.6085,0.40975,0.485,1.2874507227332457,0.3825,1.6472545757071548,0,0.119,0,2.297374429223744,0.1745],
			[Infinity,1.406575114440283,0.45644444444444443,2.765432098765432,4.2,1,0.28874074074074074,0.48133333333333334,4.832621082621083,5.133689839572193,Infinity,5.194805194805195,6.131818181818182,Infinity,6.290773532152842,4.366106080206986,1.7682926829268293,2.421090387374462,1.092902577837295,2.4769627718392924,3.1710280373831776,2.1551724137931036,3.607085346215781,0.19348148148148148,0.2437037037037037,0.2908148148148148,4.2970234325522485,0.4820740740740741],
			[Infinity,0.22434782608695653,0.21130434782608695,0.35478260869565215,6.682134570765661,3.2667416994935286,1,2.4912587412587412,7.196495619524406,0.6763478260869565,6.186895810955962,3.538743136058572,3.30387685290764,Infinity,2.3949579831932772,0.8115128115128115,0.2836521739130435,0.37182608695652175,0.22504347826086957,0.35130434782608694,0.5290434782608696,0.25669565217391305,2.3742786479802143,0.49982608695652175,3.394441159077469,0,1.5848952590959207,0.15895652173913044],
			[Infinity,3.1920618903464515,0.38705263157894737,4.513987671882409,6.036778693722257,2.001694556238085,0.44063157894736843,1,5.401810979060555,3.5285396590066718,Infinity,4.166666666666667,4.237288135593221,Infinity,0.10968421052631579,2.6385041551246537,2.861842105263158,4.606470304200869,0.5088421052631579,0.9725738396624473,6.3019867549668875,3.451519536903039,2.44015444015444,0.2431578947368421,0.13042105263157894,0.348,2.3696623634558094,1.5011801730920535],
			[Infinity,0.30469565217391303,0.2916521739130435,0.4930434782608696,0.5085217391304347,0.19130434782608696,0.12904347826086957,0.16191304347826088,1,0.5886956521739131,9.72972972972973,0.7556521739130435,2.52615518744551,Infinity,1.3297949336550061,0.6946086956521739,0.2925217391304348,0.49843478260869567,0.23026086956521738,0.31373913043478263,0.504,0.3302608695652174,0.4497391304347826,0.0071304347826086955,0.060695652173913046,0,1.5362009083622763,0.2048695652173913],
			[Infinity,1.5340909090909092,Infinity,0.234,0.3657142857142857,0.15028571428571427,1.3922518159806296,0.23342857142857143,1.6452074391988556,1,0.216,0.5328571428571428,7.793791574279379,22.03125,0.7741549506431349,0.3557142857142857,0.9261970112839281,1.0077567483710828,0.7856119231871597,1.6826003824091778,0.04342857142857143,2.4875974486180015,1.3886671987230645,0.015714285714285715,0.9966534834195315,4.310344827586207,3.8983050847457625,1.1487912836227443],
			[40,0.13333333333333333,5.758157389635317,0.009333333333333334,0,0,0.11866666666666667,0,0.049666666666666665,4.38136826783115,1,3.215434083601286,6.893424036281179,10.871886120996441,0.02266666666666667,1.5982951518380395,0.016666666666666666,0.06266666666666666,0.6363333333333333,0.17066666666666666,0,0.111,3.4522439585730726,0,0.5296666666666666,0.012333333333333333,3.7896070975918885,0.05266666666666667],
			[Infinity,0.7306,6,0.245,0.5144,0.2024,0.2864,0.228,1.2301369863013698,1.6456953642384107,0.3102,1,6.29375,18.98076923076923,0.4544,0.7994,0.8618257261410789,0.682,0.453,1.5044776119402985,0.0258,1.1075342465753424,1.7469670710571923,0.1072,0.2658,1.8315018315018314,2.8666666666666667,0.5104],
			[206.52173913043478,1.0022930520522817,15.143769968051119,0.6543157894736842,0.23157894736842105,0.13494736842105262,0.288,0.168,0.3583157894736842,0.12610526315789475,0.11936842105263158,0.15052631578947367,1,1.2562326869806095,0.20673684210526316,0.04189473684210526,0.2776842105263158,0.9607182940516273,0.172,0.5707368421052632,0.5427368421052632,1.7408759124087592,0.16294736842105262,0.04336842105263158,0.23578947368421052,10.626398210290828,0.3486315789473684,1.275],
			[0.03676595744680851,0,0,0,0,0,0,0,0,0.053361702127659574,0.08553191489361703,0.06340425531914894,0.8164055624009857,1,5.441860465116279,0.0807659574468085,0,0,0,0,0,0,0,0,0,0,1.3394989463825802,0],
			[43.604651162790695,0.5078666666666667,1.3319013821441912,0.22493333333333335,0.6512,0.16733333333333333,0.6716,4.75,1.2904692615496545,1.8056894889103183,20.380434782608695,2.6315789473684212,4.696495619524406,0.12066666666666667,1,0.08493333333333333,0.600669344042838,0.3354666666666667,0.7509333333333333,0.6544,0.1856,0.5028,0.8774193548387097,0.855042634519259,0.5002666666666666,0.6282666666666666,1.9395433316035289,0.2962666666666667],
			[Infinity,1.4422341239479723,343.6363636363636,0.2864,0.41706666666666664,0.21066666666666667,0.953850509626274,0.28373333333333334,1.201547887778136,2.7855563743551954,0.6432,0.9839977540707467,26.091549295774648,11.786833855799372,14.9402390438247,1,0.8990011098779135,0.7546659453611037,2.0281233098972415,1.973753280839895,0.0344,1.0838396111786148,2.016260162601626,0.06586666666666667,1.0945454545454545,6.805807622504537,7.383268482490273,0.9160177975528365],
			[Infinity,5.942857142857143,4.636015325670498,14.35897435897436,3.8620689655172415,0.5111724137931034,3.2991803278688523,0.3118620689655172,3.2445141065830723,0.7337931034482759,10.431034482758621,1.032722906034224,2.955382726156365,Infinity,1.6442110070792417,0.8470290771175727,1,7.036679536679537,0.2828965517241379,2.8053949903660884,11.911330049261084,2.440575828590559,0.6371034482758621,0.10620689655172413,1.2373737373737375,6.455921638468388,1.8472718001019888,6.491540516473731],
			[Infinity,0.4146666666666667,4.8806941431670285,2.406015037593985,1.5533980582524272,0.3824444444444444,2.9161248374512354,0.19,2.0516925892040256,0.9461216906641895,8.858267716535433,1.4812376563528638,1.1199791340636411,Infinity,4.901960784313726,1.1978082191780821,0.132,1,0.3348888888888889,0.38911111111111113,1.8286176232821343,0.2748888888888889,0.5426666666666666,0.033555555555555554,0.7012635379061372,0.0971111111111111,2.1336822074215034,0.496],
			[Infinity,3.618042226487524,945,2.2209165687426555,2.4399740428293315,0.8052301825115772,4.147540983606557,1.5472312703583062,4.198008849557522,1.2809217214503559,1.3404255319148937,2.102933038184837,5.613636363636363,Infinity,1.8482010842779695,0.5090666666666667,3.477859778597786,2.8877005347593583,1,2.7626745040411462,0.9765489287782282,1.9575349559813569,2.22488038277512,0.5829333333333333,2.435567010309278,34.403669724770644,3.1055646481178396,4.344827586206897],
			[Infinity,1.625,14.779411764705882,4.318181818181818,2.079002079002079,0.36275,2.8186274509803924,0.6799395161290323,2.858664772727273,0.518,5.180412371134021,0.62,1.7592592592592593,Infinity,2.4049881235154396,0.5035,0.29725,2.5063291139240507,0.3505,1,3.799426934097421,0.8338965427605927,0.498,0.306,1.3847203274215552,0.04525,1.8738361266294228,0.7811234817813765],
			[Infinity,0.3558974358974359,3.6896877956480605,2.0851063829787235,0.683076923076923,0.28717948717948716,1.9898218829516539,0.11692307692307692,1.9166666666666667,20.523560209424083,90.69767441860465,59.09090909090909,2.0674097664543525,Infinity,9.535452322738386,41.935483870967744,0.06871794871794872,0.5158974358974359,1.0677570093457944,0.23384615384615384,1,0.19615384615384615,6.6,0,0.5782854209445585,0.009487179487179488,3.376511226252159,0.36564102564102563],
			[Infinity,0.7252624525351798,9.533898305084746,3.4461538461538463,2.5140291806958475,0.4108888888888889,4.295977011494253,0.2617777777777778,3.10595567867036,0.3591111111111111,6.329113924050633,0.8677685950413223,0.532,Infinity,3.1055900621118013,0.8045402951191828,0.42044444444444445,4,0.44155555555555553,1.3186551621541207,4.7421383647798745,1,0.544,0.37266666666666665,1.4361531038919266,3.0120481927710845,1.8876262626262625,3.2585083272990585],
			[Infinity,4.068027210884353,23.25581395348837,0.4573333333333333,0.6886666666666666,0.2745,0.436,0.3973333333333333,2.080723729993041,0.679,0.2885,0.5658333333333333,5.738255033557047,Infinity,1.3213652482269505,0.4718333333333333,1.6111111111111112,1.9514563106796117,0.48433333333333334,1.8518518518518519,0.17033333333333334,1.9667318982387476,1,0.204,0.38016666666666665,10.657193605683837,2.8234183191690274,1.616188689359421],
			[Infinity,9.192795196797865,1.03546652116299,16.9173859432799,Infinity,4.680489462950374,1.838284268016518,3.657754010695187,21.362229102167184,4.773834377174669,Infinity,5.2272727272727275,5.6921487603305785,Infinity,0.44232727272727274,3.839160839160839,6.547053231939164,13.002832861189802,0.882152133580705,1.9135029898484217,24.96,2.9366602687140113,3.8450821955976595,1,0.3452363636363636,4.184418746195983,3.8016528925619837,4.450549450549451],
			[Infinity,2.038327526132404,1.5022940790911077,1.7513134851138354,8.176538908246226,3.9174107142857144,0.2907142857142857,6.361990950226244,13.361904761904762,0.7564285714285715,1.6359822885108366,3.5478966041561075,3.651948051948052,Infinity,1.8513655462184875,0.9278150633855332,0.9102224988330481,1.6826462128475552,0.398,0.6885714285714286,2.059254913464359,0.8048996458087367,2.5108225108225106,2.332880895826264,1,0.014285714285714285,2.5705386588493955,0.5908571428571429],
			[Infinity,4.176706827309237,Infinity,Infinity,Infinity,3.3915892954669578,Infinity,2.916279069767442,Infinity,0.18992,20.392156862745097,0.5224,0.0752,Infinity,2.2451888809693514,0.1344,0.13792,8.565517241379311,0.03232,14.68235294117647,55.714285714285715,0.32256,0.07856,0.2552,42,1,0.51616,3.9579349904397705],
			[Infinity,0.5906086956521739,3.8528428093645486,0.4723478260869565,0.5370434782608695,0.21721739130434783,0.6219130434782608,0.3502608695652174,0.6189565217391304,0.24834782608695652,0.28747826086956524,0.32608695652173914,2.5195652173913046,0.9200075287031809,0.5530434782608695,0.13895652173913042,0.5043478260869565,0.5158260869565218,0.32869565217391306,0.5864347826086956,0.33165217391304347,0.5485217391304348,0.36921739130434783,0.1937391304347826,0.3918260869565217,2.2575579112681585,1,0.4765217391304348],
			[Infinity,1.1675690308608555,43.26923076923077,3.7583892617449663,5.245901639344262,2.008566275924256,6.557017543859649,0.6395555555555555,5.03932584269663,0.7952402334979793,10,1.961639058413252,0.8521739130434782,Infinity,5.184331797235023,0.9997589199614272,0.1448888888888889,2.025202520252025,0.2048888888888889,1.406151914626491,2.4640522875816995,0.3308888888888889,0.608,0.20155555555555554,1.8436213991769548,0.21666666666666667,2.2357926221335993,1],
		];

		this.combatresultsFullHnR = [
			[1,0,0,0,0,0,0,0,0,0,0,0,0,86.16666666666667,0.3,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[Infinity,1,8.8283378746594,5.357737104825291,3.4095634095634098,0.7996189266433789,5.218800648298217,0.3243076923076923,3.6425339366515836,0.024923076923076923,5.30278232405892,0.14153846153846153,0.07876923076923077,Infinity,3.7757437070938216,0.03907692307692308,0.15384615384615385,2.5058004640371228,0.013846153846153847,0.192,2.8,1.2671755725190839,0,0.02523076923076923,0.10738461538461538,0.26153846153846155,0.476,0.9831903945111492],
			[Infinity,0.09733333333333333,1,0.2613333333333333,4.967320261437909,2.6684636118598384,6.114519427402863,3.568075117370892,4.13554633471646,0,0.004,0,0,Infinity,1.7241379310344827,0,0.17633333333333334,0.18733333333333332,0,0.007666666666666666,0.243,0.069,0,1.8535539215686274,0.12833333333333333,0,0.025,0.014666666666666666],
			[Infinity,0.15685714285714286,3.418467583497053,1,2.2506393861892584,0.3394285714285714,3.080357142857143,0.21171428571428572,2.24025974025974,3.43811394891945,27.61904761904762,3.510531594784353,0.8689379987722529,Infinity,8.646616541353383,2.2338403041825097,0.018571428571428572,0.3982857142857143,0.23257142857142857,0.152,0.4122857142857143,0.2674285714285714,0.868470736312146,0,0.184,0,1.5968045112781954,0.22],
			[Infinity,0.26075,0.195,0.4085,1,0.23125,0.1265,0.09975,1.913022813688213,2.056701030927835,167.5,1.680672268907563,3.5498220640569396,Infinity,2.7439024390243905,1.820054945054945,0.25725,0.63,0.329,0.404,1.2832674571805007,0.35875,0.6225,0,0.035,0,1.7715669014084507,0.18],
			[Infinity,1.5550954681389464,0.43377777777777776,2.6404715127701377,3.8138479001135073,1,0.2734814814814815,0.4488888888888889,5.078592814371257,4.097560975609756,Infinity,4.096385542168675,5.152788388082506,Infinity,5.779109589041096,3.226577437858509,1.6773320206743785,2.4038461538461537,0.6521481481481481,2.140809174896464,3.191909689557855,2.164849262347659,2.399143163156016,0.1751111111111111,0.112,0.28325925925925927,3.2952889752306946,0.4874074074074074],
			[Infinity,0.22156521739130436,0.21130434782608695,0.3572173913043478,6.7685076380728555,3.398711943793911,1,2.471812662619254,7.575757575757576,0.4888695652173913,5.358139534883721,2.703962703962704,2.5584988962472406,Infinity,1.9867549668874172,0.5027826086956522,0.2848695652173913,0.38121739130434784,0.18382608695652175,0.3227826086956522,0.5093913043478261,0.23791304347826087,1.3231947991641513,0.49495652173913046,2.1652206714447377,0,1.036741214057508,0.16208695652173913],
			[Infinity,3.4099892202659,0.408,4.473684210526316,6.226291693917593,1.9857112838831688,0.42305263157894735,1,5.401810979060555,2.5502276989016877,Infinity,2.808988764044944,2.7472527472527473,Infinity,0.056842105263157895,1.5061217999681984,2.8868778280542986,4.7604790419161676,0.26442105263157895,0.5911578947368421,6.382293762575452,3.3148019457956917,0.36494736842105263,0.26052631578947366,0.022,0.35789473684210527,0.8070624930377631,1.4878353087960074],
			[Infinity,0.31426086956521737,0.2812173913043478,0.504695652173913,0.5085217391304347,0.1831304347826087,0.13391304347826086,0.15686956521739132,1,0.4125217391304348,7.0588235294117645,0.5408695652173913,1.9498654104979811,Infinity,1.2278079710144927,0.4285217391304348,0.28243478260869564,0.4946086956521739,0.17217391304347826,0.27269565217391306,0.5243478260869565,0.34191304347826085,0.20973913043478262,0.014260869565217391,0.013391304347826087,0,0.8643013899049012,0.2111304347826087],
			[Infinity,19.608938547486034,Infinity,0.288,0.4662857142857143,0.20257142857142857,2.040212891780012,0.38542857142857145,2.3743977976600137,1,0.2082857142857143,0.6214285714285714,11.412337662337663,83.92857142857143,0.8913666772857598,0.05771428571428571,1.6461684011352886,2.463157894736842,1.1974587912087913,3.6552440290758046,0.096,14.096385542168674,1.5012942191544434,0.12171428571428572,1.6047684548372305,77.77777777777777,4.161640530759952,5.035868005738881],
			[200,0.207,176.47058823529412,0.033666666666666664,0.0013333333333333333,0,0.15133333333333332,0,0.065,4.645061728395062,1,3.6101083032490973,11.014492753623188,13.823529411764707,0.027333333333333334,0.36133333333333334,0.036,0.102,1.0599926389400074,0.2733333333333333,0.018,0.186,3.937007874015748,0,0.8673860076575008,0.060333333333333336,3.4606481481481484,0.09133333333333334],
			[Infinity,4.1193415637860085,996,0.3016,0.6,0.2254,0.3554,0.38,1.7411971830985915,1.4489795918367347,0.279,1,6.713333333333333,65.8,0.4288,0.609,1.4415204678362572,1.435897435897436,0.4792,2.411483253588517,0.0484,4.421052631578948,1.765323992994746,0.2118,0.3274,10.869565217391305,2.491183879093199,1.17],
			[339.2857142857143,9.090038314176246,169.28571428571428,1.5234097513722957,0.29810526315789476,0.16905263157894737,0.37157894736842106,0.316,0.49136842105263157,0.07894736842105263,0.10294736842105263,0.1431578947368421,1,2.307314678448699,0.15326315789473685,0.0014736842105263158,0.3875789473684211,2.3909774436090228,0.16105263157894736,1.3982773982773984,1.4414860681114552,12.552631578947368,0.16673684210526316,0.1823157894736842,0.31684210526315787,339.2857142857143,0.2008421052631579,5.402038505096263],
			[0.03489361702127659,0,0,0,0,0,0,0,0,0.018127659574468085,0.06868085106382979,0.03957446808510638,0.5258723404255319,1,3.063629222309505,0.04723404255319149,0,0,0,0,0,0,0,0,0,0,0.646468085106383,0],
			[47.46835443037975,0.5248,1.740731939163498,0.2613333333333333,0.7946984041114417,0.21773333333333333,0.827434842249657,9.403553299492385,1.4862055177928828,1.4959464937170652,18.844221105527637,2.763448784082535,7.147619047619048,0.27573333333333333,1,0.002,0.7412767108466324,0.3522666666666667,0.9815183394938868,0.882803943044907,0.22933333333333333,0.5292,1.016593886462882,1.3128060263653485,0.6785333333333333,0.6052631578947368,1.8696848424212107,0.3274666666666667],
			[Infinity,11.424242424242424,Infinity,0.4338666666666667,0.5365333333333333,0.26266666666666666,1.7416245984396512,0.5293333333333333,2.0283270978086585,12.6,2.20536756126021,1.4131647452584604,168.4090909090909,19.68586387434555,937.5,1,1.7397323488694048,2.27027027027027,15.182186234817813,13.722627737226277,0.07786666666666667,9.593908629441625,2.355921469284357,0.2677333333333333,1.7565055762081785,340.90909090909093,27.302158273381295,5.199449793672628],
			[Infinity,5.490196078431373,4.7700394218134035,12.727272727272727,3.5616438356164384,0.5017931034482759,3.2872050816696916,0.30924137931034484,3.3203483043079745,0.492,7.209533267130089,0.6310344827586207,2.440838404327248,Infinity,1.4482480869915424,0.4753103448275862,1,7.239324726911619,0.20786206896551723,2.3089121471614336,10.875562218890554,2.34933934901708,0.29282758620689653,0.11379310344827587,0.32151724137931037,6.712962962962963,1.0832413684376478,6.2844827586206895],
			[Infinity,0.41955555555555557,4.672897196261682,2.3260643821391485,1.543762922122674,0.378,2.6953125,0.1688888888888889,2.063017479300828,0.3788888888888889,6.756756756756757,0.6844444444444444,0.37577777777777777,Infinity,4.8806941431670285,0.4057777777777778,0.13533333333333333,1,0.18822222222222224,0.2906666666666667,1.8787375415282392,0.264,0.1,0.018222222222222223,0.22555555555555556,0.1111111111111111,0.9610615079365079,0.516],
			[Infinity,17.37327188940092,945,3.586337760910816,3.047001620745543,1.3188712522045856,5.3526093088857545,2.681721947776994,5.06,0.7690666666666667,0.7508055853920516,2.106430155210643,6.333333333333333,Infinity,1.4307516215185043,0.08106666666666666,4.718397997496871,4.478672985781991,1,4.109289617486339,2.759027266028003,9.24205378973105,2.2655298416565164,1.4417201056205207,2.9144178874325366,Infinity,1.357168916453849,14.594594594594595],
			[Infinity,4.01394422310757,46.206896551724135,5.667613636363637,2.3980815347721824,0.4185,3.0400302114803623,1.394311797752809,3.5431338028169015,0.2535,3.338870431893688,0.34875,0.7951219512195122,Infinity,1.9258202567760343,0.06925,0.34425,3.5357142857142856,0.226,1,7.830708661417323,1.8857142857142857,0.0435,0.51225,1.6397415185783522,0.07175,0.38375,1.656210790464241],
			[Infinity,0.34076923076923077,3.611111111111111,2.1669430624654504,0.7117948717948718,0.2787179487179487,1.905458089668616,0.09974358974358974,1.905458089668616,9.679012345679013,38.23529411764706,22.285714285714285,0.640426084697324,Infinity,10.103626943005182,14.07942238267148,0.059487179487179485,0.5169230769230769,0.4125641025641026,0.1117948717948718,1,0.17871794871794872,3.330529857022708,0,0.10948717948717948,0.004871794871794872,1.6881766998700736,0.4005128205128205],
			[Infinity,0.7193375111906893,9.433962264150944,3.595505617977528,2.471042471042471,0.4528888888888889,4.069872958257713,0.27444444444444444,3.0202020202020203,0.04111111111111111,4.901960784313726,0.2288888888888889,0.059111111111111114,Infinity,3.237410071942446,0.12422222222222222,0.39466666666666667,4,0.08333333333333333,0.5128888888888888,4.635245901639344,1,0.014666666666666666,0.35444444444444445,0.23644444444444446,3.048780487804878,0.4474097331240188,3.1757233592095977],
			[Infinity,199.33333333333334,Infinity,1.131919191919192,1.658374792703151,0.414,0.6813333333333333,2.846441947565543,4.170153417015341,0.6225,0.2495,0.5275,5.873405299313052,Infinity,1.2310614053597806,0.39816666666666667,3.672019765287214,7.389705882352941,0.4825,5.888125613346418,0.2965,102.20338983050847,1,0.9129672897196262,0.686,Infinity,2.3124516627996905,25.125],
			[Infinity,9.457789979409746,1.112228910695143,13.858585858585858,Infinity,4.6146112600536195,1.8865345181134654,3.6180904522613067,27.87878787878788,3.9918533604887982,Infinity,4.345088161209068,4.105812220566319,Infinity,0.25687272727272725,2.6547388781431334,6.261363636363637,12.068361086765995,0.49578181818181816,1.3887640449438203,26.970530451866406,3.1691599539700808,1.05841557748733,1,0.10741818181818182,3.90625,1.5897947214076247,4.208435207823961],
			[Infinity,13.19548872180451,14.747899159663865,4.784688995215311,18.285714285714285,7.373949579831932,0.42957142857142855,83.69047619047619,43.57142857142857,0.5575714285714286,0.9256965944272446,2.6525198938992043,2.5817113477781857,Infinity,1.5210355987055015,0.5715714285714286,2.950402713013989,4.267477203647417,0.33314285714285713,0.5765714285714286,7.968217934165721,5.6658595641646485,1.4043583535108959,9.535367545076284,1,0.067,1.6432419770438043,2.4231964100793926],
			[Infinity,4.010282776349614,Infinity,Infinity,Infinity,3.1944444444444446,Infinity,3.087149187592319,Infinity,0.00448,8.751753155680225,0.0616,0.00144,Infinity,2.00828817341409,0.00352,0.11712,8.214285714285714,0,10.4,77.03703703703704,0.352,0,0.24864,17.696629213483146,1,0.05696,3.9278937381404173],
			[Infinity,2.5120772946859904,45.714285714285715,0.6306086956521739,0.6580869565217391,0.28991304347826086,0.8397515527950311,1.3461354961832062,0.9922269724057521,0.26104347826086954,0.3234782608695652,0.42695652173913046,4.112845990063875,1.7899079657251666,0.5241739130434783,0.034608695652173914,0.8700751328568811,1.1069103129594624,0.5608695652173913,2.6716141001855287,0.5994782608695652,2.1876186859096087,0.4497391304347826,0.49725226023754654,0.5295652173913044,22.727272727272727,1,1.043010752688172],
			[Infinity,1.0810810810810811,35.714285714285715,3.9646017699115044,5.530864197530864,2.119410085632731,6.425501432664756,0.6333333333333333,4.53030303030303,0.20466666666666666,6.540697674418604,0.8192798541476755,0.19311111111111112,Infinity,4.766949152542373,0.17822222222222223,0.14644444444444443,1.9806338028169015,0.07422222222222222,0.6826666666666666,2.4884488448844886,0.3128888888888889,0.028,0.20777777777777778,0.36377777777777776,0.22355555555555556,0.8944145026947574,1],
		];

		this.combatresultsNoHnR_LGMP = [
			[1,0,0,1.516560048280024,0,0,0.15491758,0,0.12757642,1.3201781012658227,0.0432,1.913673701298701,3.516774074074074,Infinity,9.217433035714285,1.6869944521497917,0,0,0.019670579999999997,0,0,0,0.19105873999999998,0,1.6848808439587126,0,1.652126,0],
			[Infinity,1,0.5684703683437137,17.33333149396521,0.18543225512920622,3.222999558159004,9.557606820385598,0.4671681617244708,5.254126250963286,3.8080243803363265,2.1079831958606237,4.764459726980813,3.0512060609486924,Infinity,9.403254355205513,3.379670242476613,0.5213525856609714,2.1266455857371174,1.5664141009106085,1.3803496051093609,3.0823674775879915,1.6024197903143236,2.9703727940706512,0.01576853554015752,4.76066292475533,0.28745026960226755,4.481979500994254,0.6282100626802604],
			[Infinity,2.2179136363636363,1,13.777083333333332,5.223367697594502,21.326648936170212,167.97570588235294,17.43490163934426,24.49066463414634,4.091889124293785,0.475,5.987672380952381,5.271256476683938,Infinity,20.24220588235294,4.764798076923077,5.7543292682926825,3.4642036172695447,2.4836590909090908,2.853937146892655,4.595091928251121,2.3131049661399548,5.765478813559322,9.456876843657817,34.25924382716049,0,7.2193741176470585,1.101003353174603],
			[1.2436638062399124,0.08385019618454878,0.14230343740797632,1,0.07131089480847136,0.21060674747506905,1.269456869080837,0.04401498483847605,0.3045580746058401,5.3896038707031995,0.4727530303150891,4.590592122695862,1.0586115929059756,Infinity,5.910550545252001,3.3629447534385335,0.006509363534346223,0.10588016267797877,0.1784719189475276,0.04945318869531306,0.145543084992081,0.11047566595302713,2.5443450285080766,0,0.6236217339053061,0,1.204363555137569,0.06694382834448892],
			[Infinity,5.808821428571428,0.186,22.19308423913043,1,14.526847826086955,6.034630177514793,3.9982293233082706,20.919109375,63.373132812499996,Infinity,61.39703125,84.779375,Infinity,344.1175,40.5441,10.122301980198019,8.536263241525424,8.128338842975207,7.539505597014925,13.847371621621622,7.282605978260869,25.23188942307692,0,8.829541477272727,0,21.307180555555554,3.187591969936709],
			[66.90497837139662,0.40403054813551126,0.13492259459621242,4.34230174547591,0.14062916987786234,1,0.25964554186276784,0.2195164435665098,2.5229535202154905,6.955643389408353,2.6338039761461163,6.602421487660804,6.463298276779258,Infinity,6.392919882845588,5.145824577998535,1.3494650801803978,0.39639675064410973,0.6837934419278647,0.5312394771300515,0.723434320760411,0.4963662304428831,4.831995544945934,0.038262914493653676,0.4174389628399191,0.13230047912286347,3.9943826783256307,0.20817607578172348],
			[3.4973089493410168,0.1371535785812164,0.06353859994459983,0.702246550358998,0.24297631275110862,3.8159533040762805,1,0.5683403286259533,4.90676750352836,2.2960831160835604,0.13943192765620518,4.792825032839804,3.7641604869291387,Infinity,2.1957261650139146,1.5901634763168926,0.2930728193537791,0.16175055461451532,0.20666763085838394,0.1505753528083718,0.24925740486982187,0.14767124167465392,3.4992089082735007,0.1664600003431869,5.384111073356915,0,1.12955153686786,0.08404326606053326],
			[Infinity,2.48725185969646,0.16597572797732832,13.777088665023994,0.9452982043032598,4.541029526142767,1.6677086583808531,1,5.919590132294958,13.54639943870703,4.715521945920273,11.565920756785545,10.709998071677907,Infinity,1.1072662718791726,6.226631337744434,5.68030948252127,3.2275567491257737,2.063555848127607,0.8433285059275725,5.273870591013009,2.9823539181719734,6.872575120382687,0.1518141658572545,1.897626589487366,0.26320575743585745,5.02681666699291,0.6320404775451397],
			[5.004395652001795,0.23177856669626978,0.10684011254661745,2.960707793693558,0.0881968714311003,0.3609525321868537,0.1816168649627322,0.15711072188033817,1,3.1591110741776895,0.41929366316533256,3.421804829456785,4.683572457525668,Infinity,2.854035502881286,2.492061587672948,0.5498066585351462,0.2883761124510111,0.3916414671692972,0.24630580741442298,0.4206045787979442,0.2958488642636106,2.1691195323617927,0.002003515027751988,0.28520560820959906,0,2.632409547227487,0.15152549067352444],
			[1.5311612136040802,0.3009218560556703,0.3531169125914829,0.19604872875322635,0.052467029045850835,0.08995736190945469,0.42243655847355466,0.019987818674637975,0.31173605977789537,1,0.030858897346704373,0.41911066314700346,4.539453309149775,3.818063292863822,0.40100711842964804,0.34429239323002736,0.35472488205705277,0.2553421601055554,0.37778681645082984,0.32858886301014045,0.008637564149140983,0.36567718797434984,0.5824852906785593,0,0.5269116784875689,0.37256450035941646,2.535096065690248,0.2664406384754186],
			[19.607843137254903,0.3821371166666666,1.941747572815534,1.1707007650058847,0,0,6.388337807606264,0,1.7898703208556148,965.6858333333333,1,116.42696296296296,179.53279411764706,1001.9604166666667,5.019542139384116,28.316514285714284,2.707023389232127,0.4241175,10.57558064516129,2.0660403885480574,0.016098033333333334,0.5780040357987166,60.02880882352942,0,46.24997916666666,0.19217639999999997,25.568616666666667,0.26860775000000003],
			[0.7403147037341484,0.24669762636120948,0.21728452872059673,0.2148892174652174,0.05578445619062404,0.16055688767524895,0.2024311410618897,0.052628745791352904,0.2911646863015058,2.137941584235732,0.04153295278426023,1,4.789989473199581,4.467967088576179,0.3453952170936604,0.6528053982658975,0.36805389867690064,0.20597906301454924,0.3160778539271799,0.3320120043467086,0.0047634733967694895,0.27727846419691504,1.2760784317030982,0.0017065869939761947,0.2316377242384989,0.29590122181192596,2.188063493356146,0.19905091858574187],
			[0.4302343582976402,0.35491763179428953,0.28521087823541985,0.9589942799634128,0.04977625749187228,0.11510147367800246,0.2646487426924296,0.06272333335790692,0.2061647953880292,0.20427753212382138,0.03255508783828614,0.20161664909655208,1,0.19669038607562275,0.2618039912419736,0.120339982454459,0.2652974853848592,0.3326730557992436,0.1624145731199363,0.2626921258855706,0.27247529838477813,0.4970095704291285,0.19724891519900917,0,0.24221682160313163,0.8195028115232604,0.36852038600190196,0.3852003803991242],
			[0.014804310715867434,0,0,0,0,0,0,0,0,0.2578727752468598,0.009481412480948807,0.2379177886684645,5.4260254418684735,1,32.17943659210497,0.2949432283793646,0,0,0,0,0,0,0,0,0,0,4.9292440979324725,0],
			[0.4977757113001615,0.24703819286532458,0.19481717727229797,0.23539372258990993,0.09655616661944443,0.14758290409525815,0.6156444412155732,0.9352411674285407,0.5051669676781912,2.574822962777164,0.4753802601340143,3.1799198702459686,3.632188458962878,0.016191453984951847,1,0.3042484306474775,0.5837902644809895,0.16562964297563093,0.5740626830467307,0.33229631739158866,0.11479658740594903,0.2647931767492208,0.9178996076055989,0.19377779392213415,0.7086902198849707,0.24198064130226837,1.774560472659979,0.16562964297563093],
			[1.0253001024290342,0.3291708620983078,0.3013755392276558,0.31239607242484113,0.068665971127735,0.15378890023455943,0.5629684454704877,0.06689010114911911,0.38518391085262715,2.920156872829037,0.07880308108948035,1.4021657067792066,8.364163959737668,3.3514692170301417,3.4358905122923376,1,0.5144026134505391,0.26740372335308965,0.7548204695627724,0.3910598755429273,0.008239391181454269,0.3429467024795223,1.8857126458958557,0.0024809577719076266,1.3501958545116681,0.455033763235588,4.375922895615443,0.3113384388850659],
			[Infinity,2.318491264148423,0.43354909387906815,47.31867240003894,0.17199547122934605,0.745391130470445,3.2761814030222394,0.17892751081451846,1.6646329624004645,2.500403785972603,0.2572889487725613,2.7016768339065327,3.687161549229305,Infinity,1.8161535289632729,1.7172569458695235,1,2.6987207950417327,0.26636594129715535,1.3647501198734102,4.93932205331977,0.897830685922705,1.8181013191392026,0.015051784976316875,3.0829390372682277,3.4583782141467663,1.7043756627999775,2.215982305863481],
			[Infinity,0.44559777420172475,0.4082830819289466,9.326551495054327,0.14863805431277888,3.0557450348685653,6.720962595234536,0.2830845933025635,3.586228455007106,4.4340214598341925,1.882724104998034,5.2115112557251235,3.1210594375409064,Infinity,14.0357213125548,3.932175892578644,0.3541636315407876,1,1.762796181603572,0.6242274511190885,2.5327554202758904,0.2966213513943659,3.427385741588319,0.005769764275230331,5.17987116876023,0.13142856873390038,4.0057924757870955,0.5191622746055043],
			[5.8934635715314,0.6436029074892555,0.480229866124944,5.60561987692154,0.15031585240496215,0.9471485912846563,5.108028408835856,0.376306231946389,2.5887170756685003,2.6766303324144833,0.11151679309913587,3.0475348594903133,6.294431543829774,Infinity,2.3111364532928285,1.3631958318803254,3.7799042575719213,0.5519617621849483,1,1.1788002206149348,0.39246413273019914,0.5327942826291853,2.6412747870038316,0.11971292763101038,3.6363475948408865,2.507088460195157,3.97909751957109,0.6313062654990346],
			[Infinity,0.7212343538698521,0.4457119525880468,26.978209985772494,0.1670801190247886,1.713182528524969,6.7804062595924215,0.6316157058281316,3.9934493998862597,3.409787430816939,0.4079011673585034,3.3264380832437674,4.0991180299929315,Infinity,5.704719441322902,2.621139753925939,0.5363260190414917,1.614600856281803,0.8184761680512669,1,3.642562963400656,0.5313187723867439,2.712083286954014,0.1429403230496081,4.431773318108551,0.015802037773667312,4.588193634427813,0.4710509542397941],
			[325.09340488559883,0.32456946410456466,0.2948164131060095,6.783170379797246,0.09758901459980453,1.75368168792863,4.214472985856394,0.12973593388539437,2.4930743451374195,321.59512233026953,5.331827256695886,Infinity,4.057097035066336,Infinity,19.80588989498213,1156.3574954826147,0.179586671487564,0.3476693547560738,2.609858952361594,0.26509759145432515,1,0.20076923076923076,25.08507983232413,0,3.7945747356644492,0,5.614236236655312,0.3219690096325237],
			[Infinity,0.5777612006571644,0.5937315648252107,9.01385841846174,0.16509458896564266,2.2669872868227166,7.893982336728507,0.35730347760080006,3.8291448698381143,2.8479046454603876,0.8940028262116513,3.823624520651378,2.250797445387129,Infinity,6.842220870408163,3.0115885756888283,1.576497963561998,3.131330447930035,1.8190553935586855,1.7265129989714898,4.862526168134265,1,3.173081279296897,0.2819900579564893,4.910286849144187,2.9073526395131783,3.4824857448580504,2.4692687514548832],
			[2.657429369206416,0.38194219425852466,0.24748901201604426,0.43955344970392884,0.08249633733868142,0.20384129058294476,0.2863429737208695,0.13239543366310147,0.4890706323442575,1.5775548069253726,0.05528717951356199,0.7529038242014026,5.0637497945518435,Infinity,1.2401387440722,0.47832683343136634,0.5550880999376362,0.31654071456050065,0.4076664500223218,0.404715564267059,0.07641695176262181,0.34968932972297534,1,0.01452589242893751,0.33887827388761127,0.5126429409669883,2.5305389121120383,0.29480029564236193],
			[Infinity,11.224087995925604,0.4531047430406226,Infinity,4.859741468419362,19.63557607201122,5.207346749415001,6.302579323220404,525.2307382988062,Infinity,100.86670122285135,251.26602864656948,77.0288257694266,Infinity,4.0422762066824305,29.589012439947453,38.77265947573643,12.194332402172993,3.9897207005757327,3.9603001172231203,39.817141709931576,3.6880732871811768,34.286478181383835,1,5.178178858126434,4.689518451005616,12.11413309831386,4.479919335944599],
			[1.127823067491553,0.30126340777630983,0.13329735734115195,1.8617549896854777,0.21448658310206448,2.2624674937510183,0.19549973851339572,0.5105797885494543,3.464549213023671,1.699044815452639,0.07405408741175108,4.004728537129675,3.782051858340224,Infinity,1.3532716769975668,0.7241844307137075,0.31488924814830993,0.2552347906463021,0.28786434408303785,0.2516163439713261,0.3459714098970315,0.27013038654521915,2.7437835354066946,0.18825651182725758,1,0,1.951657617892285,0.1937806242255064],
			[Infinity,3.872991846319399,Infinity,Infinity,11.22761082827278,8.941361017422386,Infinity,4.167691089989812,Infinity,2.689279374859387,2.9506928722329913,3.37614922720405,1.172777322881704,Infinity,5.2040286131647795,2.1322504351417306,0.3336161401712177,6.533444750567526,0.3715555364758628,24.320218763478845,111.10057178680074,0.3351845710503475,2.2063728589682308,0.18626263058315173,Infinity,1,2.344701090731964,3.0498475593313166],
			[0.8269512690361946,0.28878529342937986,0.2172976376638809,0.8021703895681855,0.09344789217510789,0.23244784850177655,0.9519203150048913,0.16638037385675275,0.3796748566113275,0.40185581412630195,0.0661748745369486,0.47026379083212033,2.673171850805441,0.20690798680935024,0.5652607330470882,0.23254294164004438,0.5530183995092942,0.2649356026952312,0.264852761555996,0.2579724075803866,0.21209816982668203,0.30874541381133247,0.4048834293603421,0.036625769742464225,0.4514907846011745,0.41920554429681695,1,0.27599388573361744],
			[Infinity,1.5599909496796123,1.8715990857115106,17.72181336382991,0.3859307856902863,5.743082213368682,16.908288124593593,2.0257021354518177,7.215375119260245,4.197668331181231,2.247395996539137,5.438098701626216,2.6881305666322155,Infinity,10.743017849411544,3.613149404132621,0.41201660860492667,2.0491803278688523,1.5736297239164512,2.272837126503858,3.0350464924187897,0.37774756288056965,3.6709248051818175,0.17248266341285137,6.946908793831959,0.2945520050457715,4.2348462342191,1],
		];
	}


	public CreateBattles(){

		if (this.ut1 != this.ut2){
			this.players = [new Player(new Color(0, 0, 128), 0), new Player(new Color(0, 0, 128), 1)];
			this.players[0].amountStartUnits[this.ut1] = 50;
			this.players[1].amountStartUnits[this.ut2] = 50;
			this.players[0].CalculateResourcesInvested(this.resourceValuesFactors[this.resourceValue]);
			this.players[1].CalculateResourcesInvested(this.resourceValuesFactors[this.resourceValue]);
			this.players[1].amountStartUnits[this.ut2] = Math.round(50 * this.players[0].resourcesInvestedTotal / this.players[1].resourcesInvestedTotal);
			this.players[1].CalculateResourcesInvested(this.resourceValuesFactors[this.resourceValue]);

			for (let i: number = 0; i < this.numberOfSimulations; i++){
				new Battle(0, i, this.hitAndRunMode, this.players);
			}
			this.PrintResults();
			this.combatresults[this.ut1][this.ut2] = this.players[0].resourcesLostTotal != 0 ? this.players[1].resourcesLostTotal / this.players[0].resourcesLostTotal : Number.POSITIVE_INFINITY;
			// console.log(this.ut1 + " " + this.ut2 + ": " + this.combatresults[this.ut1][this.ut2] + " (" + this.players[0].resourcesLostTotal + " / " + this.players[1].resourcesLostTotal + ")");
		}

		this.ut2++;
		if (this.ut2 == this.numberUtToDisplay){
			this.ut2 = 0;
			this.ut1++;
		}
		
		if (this.ut1 < this.numberUtToDisplay){
			setTimeout(this.CreateBattles.bind(this), 20);
		} else {
			let outputstring: string = "";
			this.combatresults.forEach(arr => {
				outputstring = outputstring.concat("[" + arr + "],\n");
			})
			console.log(outputstring);
		}
	}


	public getSurvivorsColor(number): string {
		if (number <= 0.25){
			return new Color(255.0, 0.0, 0.0).GetAsHex(); // 255 0 0 (red)
		}
		if (number <= 0.5){
			return new Color(255.0, (number-0.25)*660.0, 0.0).GetAsHex(); // 255 0 0 (red) to 255 165 0 (orange)
		}
		if (number <= 1.0){
			return new Color(255.0, 165.0 + (number-0.5)*180.0, 0.0).GetAsHex(); // 255 165 0 (orange) to 255 255 0 (yellow)
		}
		if (number <= 2.0){
			return new Color(255.0 - (number-1.0)*111.0, 255.0 - (number-1.0)*17.0, (number-1.0)*144.0).GetAsHex(); // 255 255 0 (yellow) to 144 238 144 (light green)
		}
		if (number <= 4.0){
			return new Color(144.0 - (number-2.0)*72.0, 238.0 - (number-2.0)*69.0, 144 - (number-2.0)*72.0).GetAsHex(); // 144 238 144 (light green) to 0 100 0 (dark green)
		}
		return new Color(0.0, 100.0, 0.0).GetAsHex(); // 0 100 0 (dark green)
	}


	private PrintResults(): void
	{
		this.working = false;
		for (let i: number = 0; i < 2; i++)
		{
			this.players[i].populationRemaining = 0;
			for (let k: number = 0; k < 3; k++)
			{
				this.players[i].resourcesRemaining[k] = 0;
				this.players[i].resourcesGenerated[k] /= this.numberOfSimulations;
			}

			for (let j: number = 0; j < AoeData.unitTypesList.length; j++)
			{
				this.players[i].avgSurvivorsNumber[j] = 1.0 * this.players[i].survivorsSumArmy.get(AoeData.unitTypesList[j]) / this.numberOfSimulations;
				this.players[i].populationRemaining += this.players[i].avgSurvivorsNumber[j] * (AoeData.unitTypesList[j] == AoeData.ut_eliteKarambitWarrior ? 0.5 : 1.0);

				for (let k: number = 0; k < 3; k++)
				{
					this.players[i].resourcesRemaining[k] += Math.round(AoeData.unitTypesList[j].resourceCosts[k] * this.players[i].avgSurvivorsNumber[j]);
				}
			}
			this.players[i].populationLost = this.players[i].populationInvested - this.players[i].populationRemaining;

			for (let j: number = 0; j < 3; j++)
			{
				this.players[i].resourcesLost[j] = this.players[i].resourcesInvested[j] - this.players[i].resourcesRemaining[j];
				this.players[i].resourcesRemaining[j] += this.players[i].resourcesGenerated[j];
			}
		}
		this.CalculateWeightedSum();
	}

	public CalculateWeightedSum(): void{
		for (let i: number = 0; i < 2; i++) {
			this.players[i].resourcesLostTotal = 0;
			this.players[i].resourcesRemainingTotal = 0;
			this.players[i].resourcesGeneratedTotal = 0;
			for (let j: number = 0; j < 3; j++) {
				this.players[i].resourcesLostTotal += this.players[i].resourcesLost[j] * this.resourceValuesFactors[this.resourceValue][j];
				this.players[i].resourcesRemainingTotal += this.players[i].resourcesRemaining[j] * this.resourceValuesFactors[this.resourceValue][j];
				this.players[i].resourcesGeneratedTotal += this.players[i].resourcesGenerated[j] * this.resourceValuesFactors[this.resourceValue][j];
			}
		}
	}

	public CreateIncrArray(n: number): number[] {
		return [...Array(n).keys()];
	}

}